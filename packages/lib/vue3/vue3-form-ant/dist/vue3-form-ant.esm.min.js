/** @license @lljj/vue3-form-ant (c) 2020-2023 Liu.Jun License: Apache-2.0 */
import{defineComponent as e,h as t,ref as n,onMounted as r}from"vue";import o from"@lljj/vue3-form-core";export{SchemaField,fieldProps}from"@lljj/vue3-form-core";export{default as i18n}from"@lljj/vjsf-utils/i18n";import{resolveComponent as i,modelValueComponent as a}from"@lljj/vjsf-utils/vue3Utils";import*as u from"@lljj/vjsf-utils/vue3Utils";export{u as vueUtils};export{modelValueComponent}from"@lljj/vjsf-utils/vue3Utils";import*as l from"@lljj/vjsf-utils/formUtils";export{l as formUtils};import*as s from"@lljj/vjsf-utils/schema/validate";export{s as schemaValidate};export{default as getDefaultFormState}from"@lljj/vjsf-utils/schema/getDefaultFormState";function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m=function(n){return e({inheritAttrs:!1,setup:function(e,r){var o=r.attrs,a=r.slots;return function(){var e=o.isNumberValue,r=o.isRange,u=o.value,l=d(o,["isNumberValue","isRange","value"]),s=e?r?(u||[]).map((function(e){return"number"==typeof e?String(e):e})):"number"==typeof u?String(u):u:u,f=c(c({},o),{},{value:s,"onUpdate:value":function(t){e&&(t=r?t.map((function(e){return+e})):+t),l["onUpdate:value"].call(this,t)}});return t(i(n),f,a)}}})},g=a({name:"CheckboxesWidget",props:{enumOptions:{default:function(){return[]},type:[Array]}},setup:function(e,n){var r=n.attrs;return function(){return t(i("a-checkbox-group"),r,{default:function(){return e.enumOptions.map((function(e,n){return t(i("a-checkbox"),{key:n,value:e.value},{default:function(){return e.label}})}))}})}}},{model:"value"}),v=a({name:"RadioWidget",props:{enumOptions:{default:function(){return[]},type:[Array]}},setup:function(e,n){var r=n.attrs;return function(){return t(i("a-radio-group"),r,{default:function(){return e.enumOptions.map((function(e,n){return t(i("a-radio"),{key:n,value:e.value},{default:function(){return e.label}})}))}})}}},{model:"value"}),b=a({name:"SelectWidget",props:{enumOptions:{default:function(){return[]},type:[Array]}},setup:function(e,n){var r=n.attrs;return function(){return t(i("a-select"),c(c({},r.multiple?{mode:"multiple"}:{}),r),{default:function(){return e.enumOptions.map((function(e,n){return t(i("a-select-option"),{key:n,value:e.value},{default:function(){return e.label}})}))}})}}},{model:"value"}),h=a(m({name:"DatePickerWidget",inheritAttrs:!1,setup:function(e,n){var r=n.attrs;return function(){var e=r.isNumberValue,n=r.isRange,o=d(r,["isNumberValue","isRange"]);return t(i(n?"a-range-picker":"a-date-picker"),c({valueFormat:e?"x":"YYYY-MM-DD"},o))}}}),{model:"value"}),y=a(m({name:"DatePickerWidget",inheritAttrs:!1,setup:function(e,n){var r=n.attrs;return function(){var e=r.isNumberValue,n=r.isRange,o=d(r,["isNumberValue","isRange"]);return t(i(n?"a-range-picker":"a-date-picker"),c({valueFormat:e?"x":"YYYY-MM-DDTHH:mm:ssZ",showTime:!0},o))}}}),{model:"value"}),x={CheckboxesWidget:g,RadioWidget:v,SelectWidget:b,TimePickerWidget:a({name:"TimePickerWidget",inheritAttrs:!1,setup:function(e,n){var r=n.attrs;return function(){return t(i("a-time-picker"),c({"value-format":"HH:mm:ss"},r))}}},{model:"value"}),DatePickerWidget:h,DateTimePickerWidget:y,UploadWidget:{name:"UploadWidget",props:{modelValue:{default:null,type:[String,Array]},responseFileUrl:{default:function(){return function(e){return e?e.url||e.data&&e.data.url:""}},type:[Function]},btnText:{type:String,default:"点击上传"},slots:{type:null,default:null}},inheritAttrs:!1,setup:function(e,r){var o=r.attrs,a=r.emit,u=e.modelValue,l=Array.isArray(u),s=o.fileList||(l?u.map((function(e,t){return{uid:String(t),status:"done",name:"已上传文件（".concat(t+1,"）"),url:e}})):u?[{uid:"1",status:"done",name:"已上传文件",url:u}]:[]),f=n(s),p=function(t){return t&&(t.response&&e.responseFileUrl(t.response)||t.url)||""};return function(){return t(i("a-upload"),c(c({},o),{},{fileList:f.value,"onUpdate:fileList":function(e){f.value=e},onChange:function(e){"uploading"!==e.file.status&&function(e){var t;if(l)t=e.length?e.reduce((function(e,t){var n=p(t);return n&&(t.url=n,e.push(n)),e}),[]):[];else{var n=e[e.length-1];t=p(n),n&&t?(n.url=t,f.value=[n]):f.value=[]}a("update:modelValue",t)}(e.fileList),o.onChange&&o.onChange.call(this,e)}}),c({default:function(){return t(i("a-button"),{type:"primary"},{default:function(){return e.btnText}})}},e.slots||{}))}}},InputWidget:a("a-input"),ColorWidget:{setup:function(e,n){var r=n.attrs;return function(){return t(x.InputWidget,c(c({},r),{},{style:c(c({},r.style||{}),{},{maxWidth:"180px"})}),{addonAfter:function(){return t("input",{disabled:r.disabled,readonly:r.readonly,value:r.modelValue,onInput:function(e){r["onUpdate:modelValue"](e.target.value)},onChange:function(e){r["onUpdate:modelValue"](e.target.value)},type:"color",style:{padding:"0",width:"50px"}})}})}}},TextAreaWidget:a("a-textarea"),InputNumberWidget:a("a-input-number"),AutoCompleteWidget:a("a-auto-complete"),SliderWidget:a("a-slider"),RateWidget:a("a-rate"),SwitchWidget:a("a-switch",{model:"checked"})},j=x.InputWidget,W=x.InputNumberWidget,O=x.SwitchWidget,k=x.CheckboxesWidget,P=x.RadioWidget,C=x.SelectWidget,F=x.TimePickerWidget,S=x.DatePickerWidget,w=x.DateTimePickerWidget,A={types:{boolean:O,string:j,number:W,integer:W},formats:{color:x.ColorWidget,time:F,date:S,"date-time":w},common:{select:C,radioGroup:P,checkboxGroup:k},widgetComponents:x};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".genFromComponent.ant-form-vertical .ant-form-item-label{line-height:26px;padding-bottom:6px;font-size:14px}.genFromComponent .ant-form-item{margin-bottom:22px}.genFromComponent .ant-form-item.ant-form-item-with-help{margin-bottom:2px}.genFromComponent .ant-form-explain{padding-top:2px;display:-webkit-box!important;text-overflow:ellipsis;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal;text-align:left;line-height:1.2;font-size:12px}.genFromComponent .validateWidget .ant-form-explain{padding:5px 0;position:relative}.genFromComponent .ant-form-item-label>label.ant-form-item-no-colon:after{display:none}");var D={WIDGET_MAP:A,COMPONENT_MAP:{form:e({inheritAttrs:!1,setup:function(e,o){var a=o.attrs,u=o.slots,l={top:{layout:"vertical"},left:{layout:"horizontal",labelAlign:"left"},right:{layout:"horizontal",labelAlign:"right"}},s=n(null);return a.setFormRef&&r((function(){s.value.$$validate=function(e){s.value.validate().then((function(t){e(!0,t)})).catch((function(t){e(!1,t.errorFields)}))},a.setFormRef(s.value)})),function(){a.setFormRef;var e=a.labelPosition;a.labelWidth;var n=a.model,r=d(a,["setFormRef","labelPosition","labelWidth","model"]);return r.inline&&Object.assign(r,{layout:"inline"}),t(i("a-form"),c(c(c({ref:s,model:n.value},l[e||"top"]),r),{},{colon:!1}),u)}}}),formItem:e({inheritAttrs:!1,setup:function(e,r){var o=r.attrs,a=r.slots,u=n(null);return function(){var e=o.prop,n=o.rules,r=d(o,["prop","rules"]);return t(i("a-form-item"),c(c({},r),{},{ref:u,rules:(n||[]).map((function(e){return c(c({},e),{},{validator:function(t,n){return e.validator.apply(this,[t,n])}})})),name:e?e.split("."):e}),c(c({},a),{},{default:function(){return a.default.call(this,{onBlur:function(){u.value.$el.querySelector(".genFromWidget_des")&&u.value.onFieldBlur()},onChange:function(){u.value.$el.querySelector(".genFromWidget_des")&&u.value.onFieldChange()}})}}))}}}),button:"a-button",popover:e({setup:function(e,n){var r=n.attrs,o=n.slots;return function(){return t(i("a-popover"),r,{default:o.reference,content:o.default})}}})},HELPERS:{isMiniDes:function(e){return e&&(["left","right"].includes(e.labelPosition)||"horizontal"===e.layout||!0===e.inline)}}},R=o(D);export default R;export{D as globalOptions};
