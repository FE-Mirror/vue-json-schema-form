/** @license @lljj/vue3-form-ant (c) 2020-2023 Liu.Jun License: Apache-2.0 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue"),require("@lljj/vue3-form-core"),require("@lljj/vjsf-utils/i18n"),require("@lljj/vjsf-utils/vue3Utils"),require("@lljj/vjsf-utils/formUtils"),require("@lljj/vjsf-utils/schema/validate"),require("@lljj/vjsf-utils/schema/getDefaultFormState")):"function"==typeof define&&define.amd?define(["exports","vue","@lljj/vue3-form-core","@lljj/vjsf-utils/i18n","@lljj/vjsf-utils/vue3Utils","@lljj/vjsf-utils/formUtils","@lljj/vjsf-utils/schema/validate","@lljj/vjsf-utils/schema/getDefaultFormState"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).vue3FormAnt={},e.Vue,e.createVue3Core,e.i18n,e.vueUtils,e.formUtils,e.validate,e.getDefaultFormState)}(this,(function(e,t,n,r,o,i,l,u){"use strict";function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var f=a(n),m=a(r),d=s(o),p=s(i),c=s(l),v=a(u);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var j=function(e){return t.defineComponent({inheritAttrs:!1,setup:function(n,r){var i=r.attrs,l=r.slots;return function(){var n=i.isNumberValue,r=i.isRange,u=i.value,a=y(i,["isNumberValue","isRange","value"]),s=n?r?(u||[]).map((function(e){return"number"==typeof e?String(e):e})):"number"==typeof u?String(u):u:u,f=h(h({},i),{},{value:s,"onUpdate:value":function(e){n&&(e=r?e.map((function(e){return+e})):+e),a["onUpdate:value"].call(this,e)}});return t.h(o.resolveComponent(e),f,l)}}})},C={name:"CheckboxesWidget",props:{enumOptions:{default:function(){return[]},type:[Array]}},setup:function(e,n){var r=n.attrs;return function(){return t.h(o.resolveComponent("a-checkbox-group"),r,{default:function(){return e.enumOptions.map((function(e,n){return t.h(o.resolveComponent("a-checkbox"),{key:n,value:e.value},{default:function(){return e.label}})}))}})}}},O=o.modelValueComponent(C,{model:"value"}),W={name:"RadioWidget",props:{enumOptions:{default:function(){return[]},type:[Array]}},setup:function(e,n){var r=n.attrs;return function(){return t.h(o.resolveComponent("a-radio-group"),r,{default:function(){return e.enumOptions.map((function(e,n){return t.h(o.resolveComponent("a-radio"),{key:n,value:e.value},{default:function(){return e.label}})}))}})}}},x=o.modelValueComponent(W,{model:"value"}),P={name:"SelectWidget",props:{enumOptions:{default:function(){return[]},type:[Array]}},setup:function(e,n){var r=n.attrs;return function(){return t.h(o.resolveComponent("a-select"),h(h({},r.multiple?{mode:"multiple"}:{}),r),{default:function(){return e.enumOptions.map((function(e,n){return t.h(o.resolveComponent("a-select-option"),{key:n,value:e.value},{default:function(){return e.label}})}))}})}}},k=o.modelValueComponent(P,{model:"value"}),V=j({name:"DatePickerWidget",inheritAttrs:!1,setup:function(e,n){var r=n.attrs;return function(){var e=r.isNumberValue,n=r.isRange,i=y(r,["isNumberValue","isRange"]);return t.h(o.resolveComponent(n?"a-range-picker":"a-date-picker"),h({valueFormat:e?"x":"YYYY-MM-DD"},i))}}}),F=o.modelValueComponent(V,{model:"value"}),S=j({name:"DatePickerWidget",inheritAttrs:!1,setup:function(e,n){var r=n.attrs;return function(){var e=r.isNumberValue,n=r.isRange,i=y(r,["isNumberValue","isRange"]);return t.h(o.resolveComponent(n?"a-range-picker":"a-date-picker"),h({valueFormat:e?"x":"YYYY-MM-DDTHH:mm:ssZ",showTime:!0},i))}}}),w=o.modelValueComponent(S,{model:"value"}),A={name:"TimePickerWidget",inheritAttrs:!1,setup:function(e,n){var r=n.attrs;return function(){return t.h(o.resolveComponent("a-time-picker"),h({"value-format":"HH:mm:ss"},r))}}},D={CheckboxesWidget:O,RadioWidget:x,SelectWidget:k,TimePickerWidget:o.modelValueComponent(A,{model:"value"}),DatePickerWidget:F,DateTimePickerWidget:w,UploadWidget:{name:"UploadWidget",props:{modelValue:{default:null,type:[String,Array]},responseFileUrl:{default:function(){return function(e){return e?e.url||e.data&&e.data.url:""}},type:[Function]},btnText:{type:String,default:"点击上传"},slots:{type:null,default:null}},inheritAttrs:!1,setup:function(e,n){var r=n.attrs,i=n.emit,l=e.modelValue,u=Array.isArray(l),a=r.fileList||(u?l.map((function(e,t){return{uid:String(t),status:"done",name:"已上传文件（".concat(t+1,"）"),url:e}})):l?[{uid:"1",status:"done",name:"已上传文件",url:l}]:[]),s=t.ref(a),f=function(t){return t&&(t.response&&e.responseFileUrl(t.response)||t.url)||""};return function(){return t.h(o.resolveComponent("a-upload"),h(h({},r),{},{fileList:s.value,"onUpdate:fileList":function(e){s.value=e},onChange:function(e){"uploading"!==e.file.status&&function(e){var t;if(u)t=e.length?e.reduce((function(e,t){var n=f(t);return n&&(t.url=n,e.push(n)),e}),[]):[];else{var n=e[e.length-1];t=f(n),n&&t?(n.url=t,s.value=[n]):s.value=[]}i("update:modelValue",t)}(e.fileList),r.onChange&&r.onChange.call(this,e)}}),h({default:function(){return t.h(o.resolveComponent("a-button"),{type:"primary"},{default:function(){return e.btnText}})}},e.slots||{}))}}},InputWidget:o.modelValueComponent("a-input"),ColorWidget:{setup:function(e,n){var r=n.attrs;return function(){return t.h(D.InputWidget,h(h({},r),{},{style:h(h({},r.style||{}),{},{maxWidth:"180px"})}),{addonAfter:function(){return t.h("input",{disabled:r.disabled,readonly:r.readonly,value:r.modelValue,onInput:function(e){r["onUpdate:modelValue"](e.target.value)},onChange:function(e){r["onUpdate:modelValue"](e.target.value)},type:"color",style:{padding:"0",width:"50px"}})}})}}},TextAreaWidget:o.modelValueComponent("a-textarea"),InputNumberWidget:o.modelValueComponent("a-input-number"),AutoCompleteWidget:o.modelValueComponent("a-auto-complete"),SliderWidget:o.modelValueComponent("a-slider"),RateWidget:o.modelValueComponent("a-rate"),SwitchWidget:o.modelValueComponent("a-switch",{model:"checked"})},T=D.InputWidget,U=D.InputNumberWidget,R=D.SwitchWidget,N=D.CheckboxesWidget,M=D.RadioWidget,E=D.SelectWidget,q=D.TimePickerWidget,I=D.DatePickerWidget,Y=D.DateTimePickerWidget,_={types:{boolean:R,string:T,number:U,integer:U},formats:{color:D.ColorWidget,time:q,date:I,"date-time":Y},common:{select:E,radioGroup:M,checkboxGroup:N},widgetComponents:D};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".genFromComponent.ant-form-vertical .ant-form-item-label{line-height:26px;padding-bottom:6px;font-size:14px}.genFromComponent .ant-form-item{margin-bottom:22px}.genFromComponent .ant-form-item.ant-form-item-with-help{margin-bottom:2px}.genFromComponent .ant-form-explain{padding-top:2px;display:-webkit-box!important;text-overflow:ellipsis;overflow:hidden;-webkit-box-orient:vertical;-webkit-line-clamp:2;white-space:normal;text-align:left;line-height:1.2;font-size:12px}.genFromComponent .validateWidget .ant-form-explain{padding:5px 0;position:relative}.genFromComponent .ant-form-item-label>label.ant-form-item-no-colon:after{display:none}");var z={WIDGET_MAP:_,COMPONENT_MAP:{form:t.defineComponent({inheritAttrs:!1,setup:function(e,n){var r=n.attrs,i=n.slots,l={top:{layout:"vertical"},left:{layout:"horizontal",labelAlign:"left"},right:{layout:"horizontal",labelAlign:"right"}},u=t.ref(null);return r.setFormRef&&t.onMounted((function(){u.value.$$validate=function(e){u.value.validate().then((function(t){e(!0,t)})).catch((function(t){e(!1,t.errorFields)}))},r.setFormRef(u.value)})),function(){r.setFormRef;var e=r.labelPosition;r.labelWidth;var n=r.model,a=y(r,["setFormRef","labelPosition","labelWidth","model"]);return a.inline&&Object.assign(a,{layout:"inline"}),t.h(o.resolveComponent("a-form"),h(h(h({ref:u,model:n.value},l[e||"top"]),a),{},{colon:!1}),i)}}}),formItem:t.defineComponent({inheritAttrs:!1,setup:function(e,n){var r=n.attrs,i=n.slots,l=t.ref(null);return function(){var e=r.prop,n=r.rules,u=y(r,["prop","rules"]);return t.h(o.resolveComponent("a-form-item"),h(h({},u),{},{ref:l,rules:(n||[]).map((function(e){return h(h({},e),{},{validator:function(t,n){return e.validator.apply(this,[t,n])}})})),name:e?e.split("."):e}),h(h({},i),{},{default:function(){return i.default.call(this,{onBlur:function(){l.value.$el.querySelector(".genFromWidget_des")&&l.value.onFieldBlur()},onChange:function(){l.value.$el.querySelector(".genFromWidget_des")&&l.value.onFieldChange()}})}}))}}}),button:"a-button",popover:t.defineComponent({setup:function(e,n){var r=n.attrs,i=n.slots;return function(){return t.h(o.resolveComponent("a-popover"),r,{default:i.reference,content:i.default})}}})},HELPERS:{isMiniDes:function(e){return e&&(["left","right"].includes(e.labelPosition)||"horizontal"===e.layout||!0===e.inline)}}},H=f.default(z);Object.defineProperty(e,"SchemaField",{enumerable:!0,get:function(){return n.SchemaField}}),Object.defineProperty(e,"fieldProps",{enumerable:!0,get:function(){return n.fieldProps}}),Object.defineProperty(e,"i18n",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"modelValueComponent",{enumerable:!0,get:function(){return o.modelValueComponent}}),e.vueUtils=d,e.formUtils=p,e.schemaValidate=c,Object.defineProperty(e,"getDefaultFormState",{enumerable:!0,get:function(){return v.default}}),e.default=H,e.globalOptions=z,Object.defineProperty(e,"__esModule",{value:!0})}));
