/** @license @lljj/vue3-form-element (c) 2020-2023 Liu.Jun License: Apache-2.0 */
import{resolveComponent as e,openBlock as t,createBlock as r,withCtx as n,Fragment as o,renderList as i,createTextVNode as l,toDisplayString as u,h as a,ref as c,watch as s,getCurrentInstance as f,defineComponent as m,onMounted as p}from"vue";import d from"@lljj/vue3-form-core";export{SchemaField,fieldProps}from"@lljj/vue3-form-core";export{default as i18n}from"@lljj/vjsf-utils/i18n";import{resolveComponent as v}from"@lljj/vjsf-utils/vue3Utils";import*as g from"@lljj/vjsf-utils/vue3Utils";export{g as vueUtils};import*as y from"@lljj/vjsf-utils/formUtils";export{y as formUtils};import*as b from"@lljj/vjsf-utils/schema/validate";export{b as schemaValidate};export{default as getDefaultFormState}from"@lljj/vjsf-utils/schema/getDefaultFormState";import{parseDateString as h,openNewPage as j}from"@lljj/vjsf-utils/utils";function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var l,u=e[Symbol.iterator]();!(n=(l=u.next()).done)&&(r.push(l.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var W={name:"CheckboxesWidget",props:{enumOptions:{default:function(){return[]},type:[Array]}}};W.render=function(a,c,s,f,m,p){var d=e("el-checkbox"),v=e("el-checkbox-group");return t(),r(v,a.$attrs,{default:n((function(){return[(t(!0),r(o,null,i(s.enumOptions,(function(e,o){return t(),r(d,{key:o,label:e.value},{default:n((function(){return[l(u(e.label),1)]})),_:2},1032,["label"])})),128))]})),_:1},16)},W.__file="src/config/widgets/CheckboxesWidget/index.vue";var A={name:"RadioWidget",props:{enumOptions:{default:function(){return[]},type:[Array]}}};A.render=function(a,c,s,f,m,p){var d=e("el-radio"),v=e("el-radio-group");return t(),r(v,a.$attrs,{default:n((function(){return[(t(!0),r(o,null,i(s.enumOptions,(function(e,o){return t(),r(d,{key:o,label:e.value},{default:n((function(){return[l(u(e.label),1)]})),_:2},1032,["label"])})),128))]})),_:1},16)},A.__file="src/config/widgets/RadioWidget/index.vue";var D={name:"SelectWidget",props:{enumOptions:{default:function(){return[]},type:[Array]}}};function V(e){return null===e||""===e||Array.isArray(e)&&e.every((function(e){return""===e}))}D.render=function(l,u,a,c,s,f){var m=e("el-option"),p=e("el-select");return t(),r(p,l.$attrs,{default:n((function(){return[(t(!0),r(o,null,i(a.enumOptions,(function(e,n){return t(),r(m,{key:n,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},16)},D.__file="src/config/widgets/SelectWidget/index.vue";var _=function(e){var t=h(e,!1),r=t.year,n=t.month,o=t.day;return"".concat(r,"-").concat(n,"-").concat(o)},C=function(e){if(e instanceof Date)return e;if("string"==typeof e){var t=w(e.split(":"),3),r=t[0],n=t[1],o=t[2],i=new Date;return i.setHours(+r),i.setMinutes(+n),i.setSeconds(+o),i}},F={CheckboxesWidget:W,RadioWidget:A,SelectWidget:D,TimePickerWidget:{name:"TimePickerWidget",inheritAttrs:!1,props:{modelValue:{default:null,type:null}},setup:function(e,t){var r=t.attrs,n=t.slots,o=c(C(e.modelValue)),i=e.modelValue;return s((function(){return e.modelValue}),(function(e){e!==i&&(o.value=C(e))})),function(){return a(v("el-time-picker"),k(k({},r),{},{modelValue:o.value,"onUpdate:modelValue":function(e){var t,n,l,u;o.value=e,i=null===e?void 0:(t=h(e,!0),n=t.hour,l=t.minute,u=t.second,"".concat(n,":").concat(l,":").concat(u)),r["onUpdate:modelValue"].apply(r,[i])}}),n)}}},DatePickerWidget:{name:"DatePickerWidget",inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=t.slots;return function(){var e=r||{},t=e.isNumberValue,o=e.isRange,i=S(e,["isNumberValue","isRange"]);return a(v("el-date-picker"),k(k({type:o?"daterange":"date"},i),{},{"onUpdate:modelValue":function(e){var n;n=o?V(e)?[]:e.map((function(e){return t?new Date(e).valueOf():_(e)})):V(e)?void 0:t?new Date(e).valueOf():_(e),r["onUpdate:modelValue"].apply(r,[n])}}),n)}}},DateTimePickerWidget:{name:"DateTimePickerWidget",inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=t.slots;return function(){var e=r||{},t=e.isNumberValue,o=e.isRange,i=S(e,["isNumberValue","isRange"]);return a(v("el-date-picker"),k(k({type:o?"datetimerange":"datetime"},i),{},{"onUpdate:modelValue":function(e){var n=function(e,t,r){return e?null===r?[]:r.map((function(e){return new Date(e)[t?"valueOf":"toISOString"]()})):null===r?void 0:new Date(r)[t?"valueOf":"toISOString"]()}(o,t,e);r["onUpdate:modelValue"].apply(r,[n])}}),n)}}},UploadWidget:{name:"UploadWidget",props:{modelValue:{default:null,type:[String,Array]},responseFileUrl:{default:function(){return function(e){return e?e.url||e.data&&e.data.url:""}},type:[Function]},btnText:{type:String,default:"点击上传"},slots:{type:null,default:null}},setup:function(e,t){var r=t.attrs,n=t.emit,o=e.modelValue,i=Array.isArray(o),l=r.fileList||(i?o.map((function(e,t){return{name:"已上传文件（".concat(t+1,"）"),url:e}})):o?[{name:"已上传文件",url:o}]:[]),u=c(l),s=function(t){return t&&(t.response&&e.responseFileUrl(t.response)||t.url)||""},m=function(e){var t;if(i)t=e.length?e.reduce((function(e,t){var r=s(t);return r&&e.push(r),e}),[]):[];else{var r=e[e.length-1];t=s(r)}n("update:modelValue",t)},p=f().appContext.config.globalProperties;return function(){var t=k(k({fileList:u.value,"on-exceed":function(){p.$message&&p.$message.warning("超出文件上传数")},"on-error":function(){p.$message&&p.$message.error("文件上传失败")},"on-preview":function(e){var t=s(e);t&&j(t)}},r),{},{"on-remove":function(e,t){m(t),r["on-remove"]&&r["on-remove"](e,t)},"on-success":function(e,t,n){m(n),r["on-success"]&&r["on-success"](e,t,n)}});i||(t.limit=1);var n=k({default:function(){return a(v("el-button"),{type:"primary"},{default:function(){return e.btnText}})}},e.slots||{});return a(v("el-upload"),t,n)}}}},T={types:{boolean:"el-switch",string:"el-input",number:"el-input-number",integer:"el-input-number"},formats:{color:"el-color-picker",time:F.TimePickerWidget,date:F.DatePickerWidget,"date-time":F.DateTimePickerWidget},common:{select:F.SelectWidget,radioGroup:F.RadioWidget,checkboxGroup:F.CheckboxesWidget},widgetComponents:F};!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".genFromComponent.el-form--label-top .el-form-item__label{line-height:26px}.genFromComponent.el-form--label-top .genFromWidget_des{margin-bottom:4px;margin-top:-4px}.genFromComponent .el-checkbox,.genFromComponent .el-color-picker{vertical-align:top}.genFromComponent .formFooter_item .el-form-item__content{-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end}");var U={WIDGET_MAP:T,COMPONENT_MAP:{form:m({inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=t.slots,o=c(null);return r.setFormRef&&p((function(){r.setFormRef(o.value)})),function(){r.setFormRef;var e=S(r,["setFormRef"]);return a(v("el-form"),k({ref:o},e),n)}}}),formItem:"el-form-item",button:"el-button",popover:"el-popover"},HELPERS:{}},R=d(U);export default R;export{U as globalOptions};
